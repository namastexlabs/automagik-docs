---
title: "Sources API"
api: "GET /api/v1/sources"
description: "Manage workflow sources (LangFlow, Hive, Agents)"
---

## Overview

Sources are external workflow platforms that Spark connects to for syncing and executing workflows. Supported source types:

- **langflow**: LangFlow workflow platform
- **automagik-hive**: AutoMagik Hive multi-agent system
- **automagik-agents**: AutoMagik Agents framework

---

## List Sources

Retrieve all configured workflow sources with pagination support.

<ParamField path="status" type="string" optional>
  Filter by source status: `active` or `inactive`
</ParamField>

<ParamField query="limit" type="integer" default="50">
  Number of items per page (min: 1, max: 100)
</ParamField>

<ParamField query="offset" type="integer" default="0">
  Number of items to skip for pagination
</ParamField>

<CodeGroup>

```bash cURL
curl -X GET "http://localhost:8883/api/v1/sources?limit=10&offset=0" \
  -H "X-API-Key: your-api-key"
```

```python Python
import requests

response = requests.get(
    "http://localhost:8883/api/v1/sources",
    headers={"X-API-Key": "your-api-key"},
    params={"limit": 10, "offset": 0}
)

sources = response.json()
```

```javascript JavaScript
const response = await fetch(
  'http://localhost:8883/api/v1/sources?limit=10&offset=0',
  {
    headers: {
      'X-API-Key': 'your-api-key'
    }
  }
);

const sources = await response.json();
```

</CodeGroup>

### Response

```json 200 Success
{
  "items": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "name": "my-langflow",
      "source_type": "langflow",
      "url": "http://localhost:7860",
      "status": "active",
      "version_info": {
        "version": "1.0.0",
        "name": "LangFlow",
        "status": "ok"
      },
      "created_at": "2025-11-04T12:00:00Z",
      "updated_at": "2025-11-04T12:00:00Z"
    }
  ],
  "total": 1,
  "limit": 10,
  "offset": 0,
  "has_more": false
}
```

```json 401 Unauthorized
{
  "detail": "Invalid API key"
}
```

---

## Get Source

Retrieve a specific workflow source by ID.

<ParamField path="source_id" type="uuid" required>
  UUID of the source to retrieve
</ParamField>

<CodeGroup>

```bash cURL
curl -X GET http://localhost:8883/api/v1/sources/550e8400-e29b-41d4-a716-446655440000 \
  -H "X-API-Key: your-api-key"
```

```python Python
import requests

source_id = "550e8400-e29b-41d4-a716-446655440000"

response = requests.get(
    f"http://localhost:8883/api/v1/sources/{source_id}",
    headers={"X-API-Key": "your-api-key"}
)

source = response.json()
```

</CodeGroup>

### Response

```json 200 Success
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "my-langflow",
  "source_type": "langflow",
  "url": "http://localhost:7860",
  "status": "active",
  "version_info": {
    "version": "1.0.0",
    "name": "LangFlow",
    "status": "ok"
  },
  "created_at": "2025-11-04T12:00:00Z",
  "updated_at": "2025-11-04T12:00:00Z"
}
```

```json 404 Not Found
{
  "detail": "Source not found"
}
```

---

## Create Source

Create a new workflow source. Spark will validate the source by checking its health endpoint and fetching version information.

<ParamField body="name" type="string" optional>
  Human-readable name for the source (auto-generated if not provided)
</ParamField>

<ParamField body="source_type" type="string" required>
  Source type: `langflow`, `automagik-hive`, or `automagik-agents`
</ParamField>

<ParamField body="url" type="string" required>
  Base URL of the workflow source (e.g., `http://localhost:7860`)
</ParamField>

<ParamField body="api_key" type="string" optional>
  API key for authentication (leave empty if source doesn't require auth)
</ParamField>

<CodeGroup>

```bash cURL
curl -X POST http://localhost:8883/api/v1/sources \
  -H "Content-Type: application/json" \
  -H "X-API-Key: your-api-key" \
  -d '{
    "name": "my-langflow",
    "source_type": "langflow",
    "url": "http://localhost:7860",
    "api_key": "sk-langflow-key"
  }'
```

```python Python
import requests

response = requests.post(
    "http://localhost:8883/api/v1/sources",
    headers={
        "Content-Type": "application/json",
        "X-API-Key": "your-api-key"
    },
    json={
        "name": "my-langflow",
        "source_type": "langflow",
        "url": "http://localhost:7860",
        "api_key": "sk-langflow-key"
    }
)

source = response.json()
```

```javascript JavaScript
const response = await fetch('http://localhost:8883/api/v1/sources', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-API-Key': 'your-api-key'
  },
  body: JSON.stringify({
    name: 'my-langflow',
    source_type: 'langflow',
    url: 'http://localhost:7860',
    api_key: 'sk-langflow-key'
  })
});

const source = await response.json();
```

</CodeGroup>

### Response

```json 201 Created
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "my-langflow",
  "source_type": "langflow",
  "url": "http://localhost:7860",
  "status": "active",
  "version_info": {
    "version": "1.0.18",
    "name": "LangFlow",
    "status": "ok"
  },
  "created_at": "2025-11-04T12:00:00Z",
  "updated_at": "2025-11-04T12:00:00Z"
}
```

```json 400 Bad Request
{
  "detail": "Source with URL http://localhost:7860 already exists"
}
```

```json 400 Bad Request (Connection Failed)
{
  "detail": "Failed to validate source: Connection refused"
}
```

<Warning>
**Source Validation**: Spark validates the source by connecting to its health endpoint. Ensure the source is running and accessible before creating.

**Health Endpoints by Type**:
- LangFlow: `GET /health`
- Hive: `GET /api/v1/health`
- Agents: `GET /health`
</Warning>

---

## Update Source

Update an existing workflow source. You can update the name, URL, API key, or status.

<ParamField path="source_id" type="uuid" required>
  UUID of the source to update
</ParamField>

<ParamField body="name" type="string" optional>
  New name for the source
</ParamField>

<ParamField body="source_type" type="string" optional>
  New source type (not recommended to change)
</ParamField>

<ParamField body="url" type="string" optional>
  New base URL for the source
</ParamField>

<ParamField body="api_key" type="string" optional>
  New API key for authentication
</ParamField>

<ParamField body="status" type="string" optional>
  New status: `active` or `inactive`
</ParamField>

<CodeGroup>

```bash cURL
curl -X PATCH http://localhost:8883/api/v1/sources/550e8400-e29b-41d4-a716-446655440000 \
  -H "Content-Type: application/json" \
  -H "X-API-Key: your-api-key" \
  -d '{
    "name": "updated-langflow",
    "status": "inactive"
  }'
```

```python Python
import requests

source_id = "550e8400-e29b-41d4-a716-446655440000"

response = requests.patch(
    f"http://localhost:8883/api/v1/sources/{source_id}",
    headers={
        "Content-Type": "application/json",
        "X-API-Key": "your-api-key"
    },
    json={
        "name": "updated-langflow",
        "status": "inactive"
    }
)

source = response.json()
```

</CodeGroup>

### Response

```json 200 Success
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "updated-langflow",
  "source_type": "langflow",
  "url": "http://localhost:7860",
  "status": "inactive",
  "version_info": {
    "version": "1.0.18",
    "name": "LangFlow",
    "status": "ok"
  },
  "created_at": "2025-11-04T12:00:00Z",
  "updated_at": "2025-11-04T12:30:00Z"
}
```

```json 404 Not Found
{
  "detail": "Source not found"
}
```

```json 400 Bad Request
{
  "detail": "Source with URL http://localhost:7860 already exists"
}
```

<Tip>
**Partial Updates**: You only need to include the fields you want to update. Other fields remain unchanged.
</Tip>

---

## Delete Source

Delete a workflow source. This will also remove all associated workflows and schedules.

<ParamField path="source_id" type="uuid" required>
  UUID of the source to delete
</ParamField>

<CodeGroup>

```bash cURL
curl -X DELETE http://localhost:8883/api/v1/sources/550e8400-e29b-41d4-a716-446655440000 \
  -H "X-API-Key: your-api-key"
```

```python Python
import requests

source_id = "550e8400-e29b-41d4-a716-446655440000"

response = requests.delete(
    f"http://localhost:8883/api/v1/sources/{source_id}",
    headers={"X-API-Key": "your-api-key"}
)

result = response.json()
```

</CodeGroup>

### Response

```json 200 Success
{
  "message": "Source deleted successfully"
}
```

```json 404 Not Found
{
  "detail": "Source not found"
}
```

```json 400 Bad Request
{
  "detail": "Error deleting source: [error details]"
}
```

<Warning>
**Cascade Delete**: Deleting a source will remove all workflows and schedules associated with it. This action cannot be undone.
</Warning>

---

## Source Types

### LangFlow

LangFlow is a visual workflow builder for creating AI agents and workflows.

**Configuration**:
```json
{
  "source_type": "langflow",
  "url": "http://localhost:7860",
  "api_key": "sk-..."
}
```

**Health Check**: `GET /health` (expects `{"status": "ok"}`)

### AutoMagik Hive

Hive is a multi-agent system supporting agents, teams, and workflows.

**Configuration**:
```json
{
  "source_type": "automagik-hive",
  "url": "http://localhost:8886",
  "api_key": ""
}
```

**Health Check**: `GET /api/v1/health` (expects `{"status": "success"}`)

### AutoMagik Agents

AutoMagik Agents is a framework for building AI agents.

**Configuration**:
```json
{
  "source_type": "automagik-agents",
  "url": "http://localhost:8000",
  "api_key": ""
}
```

**Health Check**: `GET /health` (expects `{"status": "healthy"}`)

---

## Error Codes

| Status | Detail | Cause |
|--------|--------|-------|
| **400** | Source with URL already exists | Duplicate source URL |
| **400** | Failed to validate source | Cannot connect to source or health check failed |
| **400** | Error deleting source | Database or cascade delete error |
| **404** | Source not found | Invalid source ID |
| **401** | Invalid API key | Missing or incorrect X-API-Key header |

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Workflows API" icon="diagram-project" href="/spark/api/workflows">
    Sync workflows from sources
  </Card>

  <Card title="Schedules API" icon="clock" href="/spark/api/schedules">
    Schedule workflows to run automatically
  </Card>

  <Card title="CLI: Sources" icon="terminal" href="/spark/cli/commands#sources">
    Manage sources via command line
  </Card>

  <Card title="Integration: LangFlow" icon="book" href="/spark/examples/langflow-integration">
    Complete LangFlow integration guide
  </Card>
</CardGroup>
