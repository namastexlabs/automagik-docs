---
title: "Transport Modes"
description: "Technical comparison of stdio, SSE, and HTTP transports"
icon: "network-wired"
---

## Transport Modes

automagik-tools supports three transport modes for MCP communication.

## stdio

### Protocol

JSON-RPC 2.0 over standard input/output pipes.

### Connection Model

1:1 process relationship. AI agent spawns automagik-tools as subprocess.

### Latency

~1ms (inter-process communication)

### Usage

```bash
# Claude Desktop spawns process
spawn("uvx", ["automagik-tools", "serve"])

# Communication via pipes
Agent stdin → Tools stdout
Tools stdin ← Agent stdout
```

### Configuration

Claude Desktop:
```json
{
  "mcpServers": {
    "automagik-tools": {
      "command": "uvx",
      "args": ["automagik-tools", "serve"],
      "env": {
        "GITHUB_TOKEN": "ghp_xxx"
      }
    }
  }
}
```

Cursor:
```json
{
  "mcp": {
    "servers": {
      "automagik-tools": {
        "command": "uvx automagik-tools serve"
      }
    }
  }
}
```

### Characteristics

- No network ports opened
- Process-isolated execution
- Automatic lifecycle management
- Single-user only
- No remote access

## SSE (Server-Sent Events)

### Protocol

JSON-RPC 2.0 over HTTP long-polling with server-push.

### Connection Model

Many:1 server. Multiple agents connect to persistent server.

### Latency

~50ms (HTTP overhead + network)

### Usage

Start server:
```bash
automagik-tools serve --transport sse --port 3000

# Server listening at http://localhost:3000
# SSE endpoint: /sse
# Health check: /health
```

Client connection:
```http
GET /sse HTTP/1.1
Host: localhost:3000
Accept: text/event-stream
Authorization: Bearer YOUR_TOKEN

# Server establishes SSE stream
HTTP/1.1 200 OK
Content-Type: text/event-stream
Connection: keep-alive

# Server pushes events
event: tools-update
data: {"tools": [...]}

event: tool-result
data: {"result": {...}}
```

### Configuration

```bash
# Basic
automagik-tools serve --transport sse

# With auth
automagik-tools serve \
  --transport sse \
  --port 3000 \
  --auth-token SECRET

# With HTTPS
automagik-tools serve \
  --transport sse \
  --port 3000 \
  --ssl-cert cert.pem \
  --ssl-key key.pem
```

Docker:
```dockerfile
FROM python:3.11-slim
RUN pip install automagik-tools
EXPOSE 3000
CMD ["automagik-tools", "serve", \
     "--transport", "sse", \
     "--port", "3000", \
     "--host", "0.0.0.0"]
```

### Characteristics

- Persistent HTTP connections
- Real-time event push
- Multiple concurrent clients
- Stateful session management
- Requires network access

## HTTP

### Protocol

JSON-RPC 2.0 over HTTP request-response.

### Connection Model

Stateless REST API. Each request independent.

### Latency

~100ms (HTTP overhead + network + connection setup)

### Usage

Start server:
```bash
automagik-tools serve --transport http --port 8080

# REST API at http://localhost:8080
# OpenAPI docs: /docs
# Health check: /health
```

API endpoints:

List tools:
```bash
curl http://localhost:8080/tools

# Response
{
  "tools": [
    {
      "name": "genie_execute",
      "description": "...",
      "parameters": {...}
    }
  ]
}
```

Call tool:
```bash
curl -X POST http://localhost:8080/tools/call \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer TOKEN" \
  -d '{
    "tool": "genie_execute",
    "arguments": {...}
  }'

# Response
{
  "success": true,
  "result": {...}
}
```

Batch call:
```bash
curl -X POST http://localhost:8080/tools/batch \
  -H "Content-Type: application/json" \
  -d '{
    "calls": [
      {"tool": "tool1", "arguments": {...}},
      {"tool": "tool2", "arguments": {...}}
    ]
  }'

# Response
{
  "results": [
    {"success": true, "result": {...}},
    {"success": true, "result": {...}}
  ]
}
```

### Authentication

API key:
```bash
automagik-tools serve \
  --transport http \
  --auth-type apikey \
  --api-keys key1,key2

curl -H "X-API-Key: key1" http://localhost:8080/tools
```

Bearer token:
```bash
automagik-tools serve \
  --transport http \
  --auth-type bearer \
  --auth-token SECRET

curl -H "Authorization: Bearer SECRET" http://localhost:8080/tools
```

### Characteristics

- Stateless requests
- Standard REST API
- Horizontal scaling support
- OpenAPI documentation
- Load balancing compatible

## Technical Comparison

| Feature | stdio | SSE | HTTP |
|---------|-------|-----|------|
| Protocol | JSON-RPC/stdin | JSON-RPC/SSE | JSON-RPC/REST |
| Connection | 1:1 process | Many:1 persistent | Stateless |
| Latency | 1ms | 50ms | 100ms |
| Network | No | Yes | Yes |
| Real-time push | No | Yes | No |
| Scalability | 1 user | 10-100 users | Unlimited |
| State | Per process | Persistent | None |
| Auth | Process isolation | Bearer/API key | Bearer/API key |

## Performance Measurements

Measured on local machine (Linux, 6 cores):

| Operation | stdio | SSE | HTTP |
|-----------|-------|-----|------|
| Tool discovery | 0.8ms | 48ms | 95ms |
| Simple tool call | 1.2ms | 52ms | 103ms |
| Tool with I/O | 15ms | 63ms | 112ms |
| Batch 10 tools | 12ms | 180ms | 420ms |

## Use Cases

### stdio

- Single developer local setup
- AI clients: Claude Desktop, Cursor, Windsurf
- Maximum security (no network)
- Development and testing

### SSE

- Team sharing (5-50 users)
- Remote development
- Cloud deployment
- Real-time notifications
- CI/CD integration

### HTTP

- Programmatic API access
- Service integrations
- Webhooks
- Frontend applications
- Large scale deployment (50+ users)
- Kubernetes/cloud native

## Security

### stdio

- No network exposure
- Process-level isolation
- Credentials via environment variables
- No authentication needed (local-only)

### SSE

- HTTPS required for production
- Bearer token authentication
- CORS controls
- Rate limiting per client
- Connection monitoring

### HTTP

- HTTPS required for production
- API key or OAuth authentication
- CORS controls
- Rate limiting per endpoint
- Request logging

## Mixed Mode

Run multiple transports simultaneously:

```bash
automagik-tools serve \
  --transport stdio,sse,http \
  --sse-port 3000 \
  --http-port 8080

# Available via:
# - stdio for local agents
# - SSE at http://localhost:3000
# - HTTP at http://localhost:8080
```

## Environment Variables

```bash
# Transport configuration
TOOLS_TRANSPORT=sse
TOOLS_PORT=3000
TOOLS_HOST=0.0.0.0

# Authentication
TOOLS_AUTH_TOKEN=your_secret
TOOLS_API_KEYS=key1,key2

# SSL
TOOLS_SSL_CERT=/path/to/cert.pem
TOOLS_SSL_KEY=/path/to/key.pem

# CORS
TOOLS_ALLOWED_ORIGINS=https://app.example.com

# Limits
TOOLS_MAX_CONNECTIONS=100
TOOLS_RATE_LIMIT=1000

# Start with config
uvx automagik-tools serve --env .env
```

## Next Steps

- [Plugin System](/tools/concepts/plugin-system): How tools are discovered and loaded
- [MCP Architecture](/tools/concepts/mcp-architecture): MCP protocol implementation
- [OpenAPI Generation](/tools/concepts/openapi-generation): Generate tools from APIs
