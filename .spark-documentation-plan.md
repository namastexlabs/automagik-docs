# Spark Documentation Plan

## Current State
‚úÖ **Existing Files:**
- `introduction.mdx` - Basic overview
- `installation.mdx` - Setup instructions
- `quickstart.mdx` - Getting started
- `api/overview.mdx` - API basics
- `api/workflows.mdx` - Workflow endpoints
- `api/schedules.mdx` - Schedule endpoints
- `api/executions.mdx` - Execution endpoints

## Documentation Structure (Following Forge Pattern)

### üìÅ Root Level (3 files) - ‚úÖ EXISTS (needs fixes)
- [x] `introduction.mdx` - Fix YAML references, update architecture
- [x] `installation.mdx` - Fix command names, add Docker setup
- [x] `quickstart.mdx` - Correct workflow sync flow

### üìÅ concepts/ (6 files) - ‚ùå TO CREATE
Core conceptual understanding of Spark:

1. **temporal-automation.mdx** - The philosophy of proactive AI
   - What is temporal automation
   - Active vs reactive agents
   - The "digital employee" concept
   - Spark's role in the Automagik ecosystem

2. **workflow-sources.mdx** - External system integration
   - What are workflow sources
   - Supported types (LangFlow, Hive)
   - The adapter pattern
   - Source synchronization

3. **workflows-and-tasks.mdx** - Execution model
   - Workflow vs Task distinction
   - Terminology (flows, agents, teams ‚Üí workflows)
   - Task lifecycle and states
   - Retry logic and error handling

4. **scheduling-engine.mdx** - When workflows run
   - Schedule types (cron, interval, one-time)
   - Cron expressions explained
   - Timezone handling
   - Celery Beat architecture

5. **worker-architecture.mdx** - How execution happens
   - Celery worker system
   - Distributed processing
   - Scaling and load balancing
   - Queue management

6. **adapters.mdx** - Source-specific execution
   - LangFlow adapter (component-based)
   - Hive adapter (agents/teams/workflows)
   - Creating custom adapters
   - Input/output transformation

### üìÅ working/ (6 files) - ‚ùå TO CREATE
Daily operational guides:

1. **managing-sources.mdx** - Connect external systems
   - Adding LangFlow sources
   - Adding Hive sources
   - Testing source connections
   - Updating and removing sources

2. **syncing-workflows.mdx** - Bring workflows into Spark
   - Discovering remote workflows
   - Syncing to local database
   - Component mapping (LangFlow)
   - Updating synced workflows

3. **creating-schedules.mdx** - Set up automation
   - Creating cron schedules
   - Creating interval schedules
   - One-time execution
   - Configuring input data

4. **managing-tasks.mdx** - Monitor executions
   - Viewing task history
   - Filtering by status/workflow
   - Reading task logs
   - Retrying failed tasks

5. **manual-execution.mdx** - Run on demand
   - Testing workflows manually
   - Passing input parameters
   - Debugging execution issues

6. **monitoring-workers.mdx** - System health
   - Checking worker status
   - Viewing worker logs
   - Scaling workers
   - Troubleshooting worker issues

### üìÅ workflows/ (6 files) - ‚ùå TO CREATE
Real-world use case examples:

1. **automated-reports.mdx** - Daily/weekly reports
   - Example: Morning briefing agent
   - Example: Weekly analytics digest
   - Setup walkthrough
   - Scheduling best practices

2. **devops-automation.mdx** - Infrastructure tasks
   - Example: Health monitoring (every 15 min)
   - Example: Database backups
   - Example: Dependency checks
   - Integration with CI/CD

3. **data-pipelines.mdx** - ETL and processing
   - Example: Daily data sync
   - Example: ML model retraining
   - Example: Data quality checks
   - Handling long-running tasks

4. **customer-engagement.mdx** - Scheduled communication
   - Example: After-hours auto-responses
   - Example: Daily customer health checks
   - Example: Feedback collection
   - Integration with Omni

5. **content-automation.mdx** - Marketing/social
   - Example: Social media posting schedule
   - Example: Content generation pipelines
   - Example: Campaign analytics
   - Multi-step workflows

6. **team-productivity.mdx** - Internal automation
   - Example: Daily standup reminders
   - Example: Task status updates
   - Example: Resource allocation
   - Example: Automated code reviews

### üìÅ integrations/ (4 files) - ‚ùå TO CREATE
Platform-specific setup:

1. **langflow-setup.mdx** - LangFlow integration
   - Prerequisites
   - Adding LangFlow as source
   - Component identification
   - Syncing flows
   - Common issues

2. **hive-setup.mdx** - Hive integration
   - Prerequisites
   - Adding Hive as source
   - Agent vs Team vs Workflow
   - API differences
   - Best practices

3. **omni-integration.mdx** - Messaging (future)
   - Scheduled messaging
   - Notification workflows
   - Multi-channel automation

4. **custom-sources.mdx** - Build your own
   - Adapter interface
   - Source registration
   - API requirements
   - Testing adapters

### üìÅ config/ (5 files) - ‚ùå TO CREATE
Configuration reference:

1. **environment-variables.mdx** - All env vars
   - API configuration
   - Database settings
   - Celery/Redis setup
   - Security settings
   - Logging configuration
   - Timezone settings

2. **database-setup.mdx** - PostgreSQL configuration
   - Database creation
   - Connection strings
   - Migration commands
   - Backup strategies
   - Performance tuning

3. **redis-setup.mdx** - Queue configuration
   - Redis installation
   - Broker URL format
   - Result backend config
   - Memory management

4. **celery-configuration.mdx** - Worker settings
   - Concurrency settings
   - Task routing
   - Result expiration
   - Retry policies
   - Beat scheduler config

5. **security-hardening.mdx** - Production security
   - API key management
   - Encryption keys
   - Database credentials
   - CORS configuration
   - Production checklist

### üìÅ api/ (6 files) - ‚ö†Ô∏è EXPAND EXISTING
Complete API reference:

1. ‚úÖ `rest-overview.mdx` - EXPAND
   - Add authentication details
   - Add response format standards
   - Add error codes
   - Add rate limiting info

2. ‚úÖ `workflows.mdx` - EXPAND
   - Add all workflow endpoints
   - Add sync endpoints
   - Add remote discovery
   - Add execution endpoints

3. ‚úÖ `schedules.mdx` - EXPAND
   - Add enable/disable endpoints
   - Add pause functionality
   - Add input configuration
   - Add timezone handling

4. ‚úÖ `executions.mdx` - EXPAND (rename to tasks.mdx)
   - Rename to match terminology
   - Add retry endpoints
   - Add log streaming
   - Add filtering options

5. ‚ùå `sources.mdx` - NEW
   - List sources
   - Add source
   - Update source
   - Delete source
   - Health check

6. ‚ùå `workers.mdx` - NEW
   - Worker status
   - Worker statistics
   - Health monitoring

### üìÅ cli/ (6 files) - ‚ùå TO CREATE
CLI command reference:

1. **overview.mdx** - CLI introduction
   - Installation
   - Command structure
   - Global options
   - Help system

2. **source-commands.mdx** - Source management
   - `sources add`
   - `sources list`
   - `sources update`
   - `sources delete`
   - `sources run-agent`

3. **workflow-commands.mdx** - Workflow operations
   - `workflows list`
   - `workflows sync`
   - `workflows run`
   - `workflows delete`

4. **schedule-commands.mdx** - Schedule management
   - `schedules create`
   - `schedules list`
   - `schedules update`
   - `schedules delete`
   - `schedules set-expression`
   - `schedules set-input`

5. **task-commands.mdx** - Task operations
   - `tasks list`
   - `tasks view`
   - `tasks retry`
   - `tasks create`

6. **system-commands.mdx** - System management
   - `worker start/stop/status`
   - `api start`
   - `db migrate/upgrade`

### üìÅ advanced/ (4 files) - ‚ùå TO CREATE
Advanced features:

1. **custom-adapters.mdx** - Build integrations
   - Adapter interface
   - Registration process
   - Testing strategies
   - Best practices

2. **multi-step-workflows.mdx** - Roadmap feature
   - Step concept
   - Step outputs
   - Data passing
   - Conditional logic

3. **scaling-workers.mdx** - Performance
   - Horizontal scaling
   - Worker pools
   - Queue priorities
   - Resource allocation

4. **webhooks.mdx** - External triggers
   - Webhook setup
   - Authentication
   - Payload format
   - Triggering workflows

### üìÅ troubleshooting/ (4 files) - ‚ùå TO CREATE
Help and debugging:

1. **common-issues.mdx** - FAQ
   - Connection problems
   - Sync failures
   - Schedule not triggering
   - Task failures

2. **celery-errors.mdx** - Worker issues
   - Worker not starting
   - Tasks stuck in queue
   - Redis connection errors
   - Beat scheduler problems

3. **database-errors.mdx** - PostgreSQL issues
   - Migration failures
   - Connection problems
   - Performance issues

4. **faq.mdx** - General questions
   - Terminology clarifications
   - Architecture questions
   - Feature roadmap
   - Getting help

## Content Guidelines

### Style (matching Forge pattern):
- Use AccordionGroup for collapsible sections
- Include mermaid diagrams for flows
- Use CardGroup for feature highlights
- Add Tip/Warning/Info callouts
- Include code examples in multiple languages (bash, python, json)
- Cross-link related pages
- Use Steps component for walkthroughs
- Add Tables for comparisons

### Fixes Needed in Existing Docs:
1. **Introduction**: Remove YAML workflow references (workflows come from sources)
2. **Installation**: Change `spark init` to `automagik-spark` commands
3. **Quickstart**: Show source ‚Üí sync ‚Üí schedule flow (not YAML files)
4. **API docs**: Match actual endpoint implementations

### Key Messages to Emphasize:
- **"AI that works while you sleep"** - 24/7 autonomous execution
- **"Transform reactive into proactive"** - The temporal automation value
- **"Your workflows, any source"** - Multi-platform support
- **"Schedule once, run forever"** - Set and forget reliability

## Priority Order

### Phase 1: Core Concepts (Week 1)
1. Create `concepts/` directory with 6 concept files
2. Fix existing root-level files (introduction, installation, quickstart)
3. These are foundation - everything else builds on this

### Phase 2: Practical Guides (Week 2)
1. Create `working/` directory with 6 operational guides
2. Create `integrations/` directory with 4 integration guides
3. These get users productive quickly

### Phase 3: API & CLI (Week 3)
1. Expand existing `api/` files
2. Add missing API endpoint files (sources, workers)
3. Create `cli/` directory with 6 command references
4. Complete technical reference

### Phase 4: Advanced & Examples (Week 4)
1. Create `workflows/` directory with 6 use case examples
2. Create `config/` directory with 5 configuration guides
3. Create `advanced/` directory with 4 advanced topics
4. Create `troubleshooting/` directory with 4 help files

## Success Metrics

Documentation is complete when:
- ‚úÖ Matches Forge structure pattern
- ‚úÖ All 57 planned files created
- ‚úÖ No inconsistencies or outdated info
- ‚úÖ Every concept has visual diagram
- ‚úÖ Every feature has code example
- ‚úÖ Every API endpoint documented with examples
- ‚úÖ Every CLI command has usage examples
- ‚úÖ Cross-links between related pages
- ‚úÖ Updated docs.json navigation

## Total File Count

- Root: 3 files (existing, need fixes)
- Concepts: 6 files (new)
- Working: 6 files (new)
- Workflows: 6 files (new)
- Integrations: 4 files (new)
- Config: 5 files (new)
- API: 6 files (3 existing expand, 3 new)
- CLI: 6 files (new)
- Advanced: 4 files (new)
- Troubleshooting: 4 files (new)

**Total: 50 files** (3 existing to fix, 47 new to create)
