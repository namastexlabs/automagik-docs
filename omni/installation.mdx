---
title: "Installation"
description: "Get Omni up and running"
icon: "download"
---

## Prerequisites

Before installing Omni, make sure you have:

<AccordionGroup>
  <Accordion title="Python 3.12+ (3.11+ supported)">
    ```bash
    # Check your Python version
    python3 --version

    # Should output Python 3.11.0 or higher
    ```

    If you need to install or upgrade Python:
    - **macOS**: `brew install python@3.12`
    - **Ubuntu/Debian**: `sudo apt install python3.12 python3-pip`
    - **Windows**: Download from [python.org](https://www.python.org)
  </Accordion>

  <Accordion title="Node.js 20+ (for Evolution API - WhatsApp)">
    ```bash
    # Check your Node.js version
    node --version

    # Should output v20.0.0 or higher
    ```

    Install via:
    - **macOS**: `brew install node@20`
    - **Ubuntu/Debian**: Use [NodeSource repository](https://github.com/nodesource/distributions)
    - **Windows**: Download from [nodejs.org](https://nodejs.org)
  </Accordion>

  <Accordion title="Git (for submodule support)">
    Omni includes Evolution API as a git submodule.

    ```bash
    # Check if Git is installed
    git --version
    ```
  </Accordion>

  <Accordion title="Optional: PostgreSQL (Production)">
    SQLite works great for development. For production scale, use PostgreSQL:

    ```bash
    # Ubuntu/Debian
    sudo apt install postgresql postgresql-contrib

    # macOS
    brew install postgresql@15

    # Or use Docker
    docker run -d -p 5432:5432 \
      -e POSTGRES_PASSWORD=yourpassword \
      -e POSTGRES_DB=automagik_omni \
      postgres:15
    ```
  </Accordion>
</AccordionGroup>

---

## Installation

### Clone with Submodules

Omni includes Evolution API as a submodule, so use `--recurse-submodules`:

```bash
# Clone repository with Evolution API submodule
git clone --recurse-submodules https://github.com/namastexlabs/automagik-omni.git
cd automagik-omni
```

<Warning>
**Important**: The `--recurse-submodules` flag is required to clone the Evolution API (WhatsApp integration). Without it, WhatsApp features won't work.
</Warning>

---

### Install Dependencies

Use the Makefile to install everything:

```bash
# Install all dependencies (Omni + Evolution API + optional Discord prompt)
make install

# This will:
# 1. Install Omni core dependencies (Python via uv)
# 2. Install Evolution API dependencies (Node.js via pnpm/npm)
# 3. Prompt you to install optional Discord support
```

<Tip>
**What's installed:**
- Omni Backend (Python/FastAPI)
- Evolution API (WhatsApp integration with SQLite - no Docker needed!)
- Optional: Discord bot manager
</Tip>

Alternatively, install components separately:

```bash
# Install only Omni core (Python dependencies)
make install-omni

# Install only Evolution API (Node.js dependencies)
make install-evolution

# Install optional Discord extras
make install-discord
```

---

## Configuration

### Create .env File

```bash
# Copy example configuration
cp .env.example .env
```

Edit `.env` with your settings:

```env
# =================================================================
# Core API Settings (REQUIRED)
# =================================================================

# API Authentication - Generate a secure random string!
AUTOMAGIK_OMNI_API_KEY="CHANGE-THIS-TO-SECURE-KEY"

# API Server
AUTOMAGIK_OMNI_API_HOST="0.0.0.0"
AUTOMAGIK_OMNI_API_PORT="8882"

# =================================================================
# Database Configuration
# =================================================================

# SQLite (Default - for development)
AUTOMAGIK_OMNI_SQLITE_DATABASE_PATH="./data/automagik-omni.db"

# PostgreSQL (Optional - for production)
# AUTOMAGIK_OMNI_DATABASE_URL="postgresql://user:password@localhost:5432/automagik_omni"

# =================================================================
# Evolution API (WhatsApp)
# =================================================================

EVOLUTION_API_PATH="resources/evolution-api"
EVOLUTION_API_URL="http://localhost:18082"
EVOLUTION_API_PORT="18082"
EVOLUTION_API_KEY="CHANGE-THIS-TO-SECURE-KEY"

# =================================================================
# Discord (Optional)
# =================================================================

# DISCORD_TOKEN="YOUR-DISCORD-BOT-TOKEN-HERE"

# =================================================================
# Logging
# =================================================================

LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FOLDER="./logs"
```

<Warning>
**Security**:
- **NEVER** commit `.env` to version control!
- Generate **strong, unique** API keys for production
- Use different keys for Omni and Evolution API
</Warning>

---

## Start Services

### Option 1: Development Mode (Makefile)

```bash
# Start both Omni + Evolution API together
make dev-all

# Or start them separately:
make dev  # Omni API only
make evo  # Evolution API only
```

You should see output like:

```
✓ Starting Evolution API in background...
✓ Evolution API started (logs: logs/evolution-dev.log)
✓ Starting Omni API server...

INFO:     Uvicorn running on http://0.0.0.0:8882 (Press CTRL+C to quit)
INFO:     Started reloader process using WatchFiles
```

### Option 2: Production Mode (PM2)

```bash
# Install PM2 if you haven't already
npm install -g pm2

# Start all services with PM2
pm2 start ecosystem.config.js

# Monitor services
pm2 monit

# View logs
pm2 logs

# Stop services
pm2 stop all
```

---

## Verify Installation

Check that services are running:

```bash
# Check Omni API health
curl http://localhost:8882/health
# Should return: {"status": "healthy"}

# Check Evolution API health
curl http://localhost:18082/health
# Should return: {"status": true}
```

If both return healthy status, you're ready to go!

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Quick Start" icon="rocket" href="/omni/quickstart">
    Send your first message in 5 minutes
  </Card>
  <Card title="API Reference" icon="code" href="/omni/api/rest-overview">
    Explore the REST API
  </Card>
</CardGroup>

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="Evolution API submodule missing">
    If Evolution API submodule wasn't cloned:

    ```bash
    # Initialize submodule
    git submodule update --init --recursive resources/evolution-api

    # Then install Evolution API dependencies
    make install-evolution
    ```
  </Accordion>

  <Accordion title="uv command not found">
    Install the uv package manager:

    ```bash
    # Install uv
    curl -LsSf https://astral.sh/uv/install.sh | sh

    # Reload shell
    source ~/.bashrc  # or ~/.zshrc
    ```
  </Accordion>

  <Accordion title="Port already in use">
    Change ports in `.env`:

    ```env
    AUTOMAGIK_OMNI_API_PORT="8883"  # Change from 8882
    EVOLUTION_API_PORT="18083"       # Change from 18082
    ```

    Then restart services.
  </Accordion>

  <Accordion title="Evolution API won't start">
    Check Node.js version and package manager:

    ```bash
    # Check Node.js version (needs 20+)
    node --version

    # Try installing with npm instead of pnpm
    cd resources/evolution-api
    npm install
    npm run dev:server
    ```
  </Accordion>

  <Accordion title="Database connection errors">
    For SQLite:
    ```bash
    # Ensure data directory exists
    mkdir -p ./data

    # Check permissions
    ls -la ./data
    ```

    For PostgreSQL:
    ```bash
    # Test connection
    psql -h localhost -U your_user -d automagik_omni

    # Check DATABASE_URL is correct in .env
    ```
  </Accordion>
</AccordionGroup>
