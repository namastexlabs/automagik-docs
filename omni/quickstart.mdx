---
title: "Quick Start"
description: "Send your first message in 5 minutes"
icon: "rocket"
---

## Send Your First Message in 5 Minutes

This guide will walk you through setting up Omni, connecting WhatsApp, and sending your first message using the **REST API**.

<Warning>
**Prerequisites**: Complete the [Installation Guide](/omni/installation) first. Make sure services are running with `make dev-all` or PM2.
</Warning>

---

## Step 1: Verify Services Are Running

```bash
# Check Omni API
curl http://localhost:8882/health
# Expected: {"status": "healthy"}

# Check Evolution API (WhatsApp)
curl http://localhost:18082/health
# Expected: {"status": true}
```

If both return healthy, you're ready to continue!

---

## Step 2: Get Your API Keys

Your API keys are in `.env`:

```bash
# View your Omni API key
grep AUTOMAGIK_OMNI_API_KEY .env

# View your Evolution API key
grep EVOLUTION_API_KEY .env
```

**Example output:**
```
AUTOMAGIK_OMNI_API_KEY="your-secret-key-here"
EVOLUTION_API_KEY="your-evolution-key-here"
```

<Warning>
**Security**: Never share these keys! They provide full access to your Omni instance.
</Warning>

---

## Step 3: Create a WhatsApp Instance

Use the REST API to create your first instance:

```bash
curl -X POST http://localhost:8882/api/v1/instances \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "my-first-bot",
    "channel_type": "whatsapp",
    "evolution_url": "http://localhost:18082",
    "evolution_key": "YOUR_EVOLUTION_API_KEY_HERE"
  }'
```

**Replace:**
- `YOUR_OMNI_API_KEY_HERE` ‚Üí Your Omni API key from `.env`
- `YOUR_EVOLUTION_API_KEY_HERE` ‚Üí Your Evolution API key from `.env`

**Expected response:**
```json
{
  "id": "...",
  "name": "my-first-bot",
  "channel_type": "whatsapp",
  "status": "created",
  "evolution_url": "http://localhost:18082"
}
```

<Tip>
**Instance created!** This is your multi-tenant messaging instance. You can create multiple instances for different teams, clients, or use cases.
</Tip>

---

## Step 4: Get QR Code to Connect WhatsApp

Get the QR code to link your WhatsApp account:

```bash
curl http://localhost:8882/api/v1/instances/my-first-bot/qr \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE"
```

**Expected response:**
```json
{
  "qr_code": "data:image/png;base64,iVBORw0KGgoAAAANS...",
  "instance_name": "my-first-bot",
  "status": "awaiting_connection"
}
```

### Scan the QR Code

The QR code is returned as a base64-encoded PNG. To use it:

**Option 1: Save and Open**
```bash
# Save QR code to file (macOS/Linux)
curl http://localhost:8882/api/v1/instances/my-first-bot/qr \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE" \
  | jq -r '.qr_code' \
  | sed 's/data:image\/png;base64,//' \
  | base64 -d > qr.png

# Open the image
open qr.png  # macOS
xdg-open qr.png  # Linux
```

**Option 2: Use Evolution API Directly**
```bash
# Open in browser (Evolution API provides a web UI)
open http://localhost:18082/instance/connect/my-first-bot
```

### Complete WhatsApp Connection

1. Open **WhatsApp** on your phone
2. Go to **Settings ‚Üí Linked Devices**
3. Tap **"Link a Device"**
4. Scan the QR code displayed

<Tip>
**Connection takes ~5 seconds**. Once connected, you'll see a success message.
</Tip>

---

## Step 5: Verify Connection Status

Check if your instance is connected:

```bash
curl http://localhost:8882/api/v1/instances/my-first-bot/status \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE"
```

**Expected response:**
```json
{
  "instance_name": "my-first-bot",
  "channel_type": "whatsapp",
  "connection_status": "connected",
  "phone_number": "+1234567890"
}
```

If `connection_status` is `"connected"`, you're ready to send messages!

---

## Step 6: Send Your First Message

Now send a test message via the REST API:

```bash
curl -X POST http://localhost:8882/api/v1/instances/my-first-bot/send-text \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+1234567890",
    "message": "üéâ Hello from Automagik Omni! This is my first message."
  }'
```

**Replace:**
- `+1234567890` ‚Üí Recipient's phone number (include country code!)
- Customize the message text as you like

**Expected response:**
```json
{
  "message_id": "3EB0ABC123DEF456...",
  "status": "sent",
  "phone": "+1234567890",
  "instance_name": "my-first-bot"
}
```

**Congratulations!** üéâ You just sent your first omnichannel message!

---

## Additional Message Types

### Send Media (Image, Video, Document)

```bash
curl -X POST http://localhost:8882/api/v1/instances/my-first-bot/send-media \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+1234567890",
    "media_url": "https://example.com/image.jpg",
    "media_type": "image",
    "caption": "Check out this image!"
  }'
```

**Media types:** `image`, `video`, `document`

### Send Audio/Voice Note

```bash
curl -X POST http://localhost:8882/api/v1/instances/my-first-bot/send-audio \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+1234567890",
    "audio_url": "https://example.com/audio.mp3"
  }'
```

### Send Reaction

```bash
curl -X POST http://localhost:8882/api/v1/instances/my-first-bot/send-reaction \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+1234567890",
    "message_id": "3EB0ABC123DEF456...",
    "emoji": "üëç"
  }'
```

---

## View Message Traces

Track all messages sent and received:

```bash
# List recent message traces
curl http://localhost:8882/api/v1/traces?instance_name=my-first-bot&limit=10 \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE"
```

**Response:**
```json
{
  "traces": [
    {
      "trace_id": "...",
      "instance_name": "my-first-bot",
      "phone": "+1234567890",
      "message_type": "text",
      "trace_status": "completed",
      "created_at": "2025-11-04T20:30:00Z"
    }
  ],
  "total": 1
}
```

---

## Using MCP Tools (Optional)

If you're using Claude Code, Cursor, or any MCP-compatible tool, you can control Omni directly from your AI assistant.

### Configure MCP Server

Add to your MCP configuration:

```json
{
  "mcpServers": {
    "omni": {
      "command": "uvx",
      "args": ["--from", "automagik-omni", "mcp-server-omni"],
      "env": {
        "OMNI_URL": "http://localhost:8882",
        "OMNI_API_KEY": "your-api-key-here"
      }
    }
  }
}
```

### Use from AI Assistant

```
You: "List all my Omni instances"
Claude: [Uses manage_instances tool]

You: "Send a WhatsApp message to +1234567890 saying hello"
Claude: [Uses send_message tool]

You: "Show me message analytics for today"
Claude: [Uses manage_traces tool]
```

---

## Multi-Tenant Setup

Create instances for different clients or teams:

```bash
# Client A - WhatsApp
curl -X POST http://localhost:8882/api/v1/instances \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "client-a-whatsapp",
    "channel_type": "whatsapp",
    "evolution_url": "http://localhost:18082",
    "evolution_key": "YOUR_EVOLUTION_API_KEY_HERE"
  }'

# Client B - Discord
curl -X POST http://localhost:8882/api/v1/instances \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "client-b-discord",
    "channel_type": "discord",
    "discord_token": "YOUR_DISCORD_BOT_TOKEN"
  }'
```

Each instance is **completely isolated** with its own:
- Message queue
- Connection status
- Trace history
- Configuration

---

## Connect to AI Agents

Omni can forward messages to any AI agent with an HTTP API:

```bash
# Create instance with agent integration
curl -X POST http://localhost:8882/api/v1/instances \
  -H "x-api-key: YOUR_OMNI_API_KEY_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ai-powered-bot",
    "channel_type": "whatsapp",
    "evolution_url": "http://localhost:18082",
    "evolution_key": "YOUR_EVOLUTION_API_KEY_HERE",
    "agent_api_url": "http://localhost:8886/chat",
    "agent_api_key": "YOUR_AGENT_API_KEY",
    "default_agent": "customer-support-agent"
  }'
```

**How it works:**
1. User sends message to WhatsApp
2. Omni receives webhook from Evolution API
3. Omni forwards message to your AI agent
4. AI agent processes and returns response
5. Omni sends response back to user

**Agent API format:**
```http
POST http://localhost:8886/chat
Content-Type: application/json
x-api-key: YOUR_AGENT_API_KEY

{
  "message": "User's message",
  "user_id": "whatsapp:+1234567890",
  "platform": "whatsapp",
  "context": {
    "phone": "+1234567890",
    "instance_name": "ai-powered-bot"
  }
}
```

<Tip>
**Works with:**
- [Automagik Hive](https://github.com/namastexlabs/automagik-hive) - Multi-agent orchestration with streaming SSE
- Any OpenAPI-compatible agent
- Custom HTTP endpoints
</Tip>

---

## Common Use Cases

<CardGroup cols={2}>
  <Card title="Customer Support Bot" icon="headset">
    ```bash
    # Forward incoming messages to AI agent
    # Agent responds automatically
    # Full conversation traced
    ```
  </Card>

  <Card title="Notification System" icon="bell">
    ```bash
    # Send alerts across platforms
    curl -X POST .../send-text \
      -d '{"phone": "+123...", "message": "Alert!"}'
    ```
  </Card>

  <Card title="Marketing Campaigns" icon="bullhorn">
    ```bash
    # Broadcast to multiple recipients
    # Track delivery and engagement
    # Full analytics
    ```
  </Card>

  <Card title="Order Updates" icon="box">
    ```bash
    # E-commerce order notifications
    # Shipping updates
    # Delivery confirmations
    ```
  </Card>
</CardGroup>

---

## Next Steps

<CardGroup cols={2}>
  <Card title="API Reference" icon="code" href="/omni/api/rest-overview">
    Explore all REST API endpoints
  </Card>
  <Card title="Webhooks" icon="webhook" href="/omni/webhooks">
    Receive incoming messages
  </Card>
  <Card title="Multi-Tenant Setup" icon="users" href="/omni/multi-tenant">
    Manage multiple clients
  </Card>
  <Card title="Production Deployment" icon="server" href="/omni/deployment">
    Deploy at scale
  </Card>
</CardGroup>

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="QR code won't scan">
    Try these solutions:

    ```bash
    # Regenerate QR code
    curl -X POST http://localhost:8882/api/v1/instances/my-first-bot/logout \
      -H "x-api-key: YOUR_OMNI_API_KEY_HERE"

    # Get new QR code
    curl http://localhost:8882/api/v1/instances/my-first-bot/qr \
      -H "x-api-key: YOUR_OMNI_API_KEY_HERE"
    ```
  </Accordion>

  <Accordion title="Messages not sending">
    Check connection status:

    ```bash
    # Check instance status
    curl http://localhost:8882/api/v1/instances/my-first-bot/status \
      -H "x-api-key: YOUR_OMNI_API_KEY_HERE"

    # If disconnected, restart
    curl -X POST http://localhost:8882/api/v1/instances/my-first-bot/restart \
      -H "x-api-key: YOUR_OMNI_API_KEY_HERE"
    ```
  </Accordion>

  <Accordion title="Phone number format">
    Always use **international format** with country code:

    ```bash
    # ‚úÖ Correct
    "+1234567890"      # US
    "+5511999999999"   # Brazil
    "+447911123456"    # UK

    # ‚ùå Wrong
    "1234567890"       # Missing +
    "(123) 456-7890"   # Has formatting
    "011-999-9999"     # Local format
    ```
  </Accordion>

  <Accordion title="Evolution API errors">
    Check Evolution API logs:

    ```bash
    # View Evolution API logs
    tail -f logs/evolution-dev.log

    # Or if using PM2
    pm2 logs evolution-api

    # Restart Evolution API
    make evo-restart
    ```
  </Accordion>

  <Accordion title="API authentication errors">
    Verify your API key:

    ```bash
    # Check API key in .env
    grep AUTOMAGIK_OMNI_API_KEY .env

    # Test authentication
    curl http://localhost:8882/api/v1/instances \
      -H "x-api-key: YOUR_API_KEY" \
      -v
    ```

    Make sure header is `x-api-key`, not `X-API-Key` or `Authorization`.
  </Accordion>
</AccordionGroup>

---

**You're now ready to build omnichannel messaging into your applications!** üöÄ

<Card title="Join the Community" icon="discord" href="https://discord.gg/xcW8c7fF3R">
  Get help and share your integrations with the community
</Card>
