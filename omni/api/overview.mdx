---
title: "API Overview"
description: "Omni REST API for omnichannel messaging"
icon: "code"
---

## Omni REST API

The Omni REST API provides programmatic access to all omnichannel messaging features. Send messages, manage instances, and track conversations across WhatsApp, Discord, Slack, and more.

### Base URL

```
http://localhost:8882/api/v1
```

For production deployments, replace `localhost:8882` with your Omni server address.

<Info>
Default port is `8882`. This can be configured via `AUTOMAGIK_OMNI_API_PORT` in your `.env` file.
</Info>

---

## Quick Start

### 1. Start Omni Server

```bash
# Start Omni with make
make dev

# Or with PM2 for production
pm2 start ecosystem.config.js

# API will be available at http://localhost:8882/api/v1
# Swagger docs at http://localhost:8882/docs
```

### 2. Test the API

```bash
# Health check
curl http://localhost:8882/health
# {"status":"healthy"}

# List instances (requires API key)
curl http://localhost:8882/api/v1/instances \
  -H "x-api-key: your-api-key-from-env"
```

---

## Authentication

All Omni API requests require the `x-api-key` header:

```bash
curl -X GET http://localhost:8882/api/v1/instances \
  -H "x-api-key: your-api-key-here"
```

**Set your API key in `.env`:**
```bash .env
AUTOMAGIK_OMNI_API_KEY=your-secure-random-key-here
```

<Warning>
**Security**: Always use a strong, randomly generated API key. Never commit keys to version control!
</Warning>

**Generate a secure key:**
```bash
# Generate a random 32-character API key
openssl rand -hex 32
```

---

## Core Endpoints

<CardGroup cols={2}>
  <Card title="Send Message" icon="paper-plane" href="/omni/api/send-message">
    Send text, media, or reactions to any platform
  </Card>

  <Card title="Manage Instances" icon="server" href="/omni/api/manage-instances">
    Create, configure, and monitor messaging instances
  </Card>

  <Card title="Message Traces" icon="chart-line" href="/omni/api/traces">
    Track, debug, and analyze all messages
  </Card>

  <Card title="Webhooks" icon="webhook">
    **Coming Soon**: Receive real-time message events
  </Card>
</CardGroup>

---

## Rate Limits

| Endpoint | Limit | Window |
|----------|-------|--------|
| Send Message | 60 requests | 1 minute |
| Manage Instances | 30 requests | 1 minute |
| Get Traces | 100 requests | 1 minute |

Rate limit headers are included in every response:
```http
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 59
X-RateLimit-Reset: 1635724800
```

---

## Error Handling

All errors follow a consistent format:

```json
{
  "error": {
    "code": "INSTANCE_NOT_FOUND",
    "message": "Instance 'my-whatsapp' does not exist",
    "details": {
      "instance": "my-whatsapp",
      "available_instances": ["prod-whatsapp", "test-discord"]
    }
  }
}
```

### Common Error Codes

| Code | HTTP Status | Description |
|------|-------------|-------------|
| `INSTANCE_NOT_FOUND` | 404 | Instance doesn't exist |
| `INSTANCE_NOT_CONNECTED` | 503 | Instance is disconnected |
| `INVALID_PHONE_NUMBER` | 400 | Phone number format invalid |
| `MESSAGE_SEND_FAILED` | 500 | Failed to send message |
| `RATE_LIMIT_EXCEEDED` | 429 | Too many requests |

---

## SDKs and Libraries

<Tabs>
  <Tab title="Python">
    ```python
    # Install
    pip install automagik-omni-client

    # Use
    from omni_client import OmniClient

    client = OmniClient(base_url="http://localhost:8000")

    # Send message
    result = client.send_message(
        instance="my-whatsapp",
        to="+1234567890",
        message="Hello from Python!"
    )
    ```
  </Tab>

  <Tab title="JavaScript/TypeScript">
    ```javascript
    // Install
    npm install @automagik/omni-client

    // Use
    import { OmniClient } from '@automagik/omni-client';

    const client = new OmniClient({
      baseUrl: 'http://localhost:8000'
    });

    // Send message
    const result = await client.sendMessage({
      instance: 'my-whatsapp',
      to: '+1234567890',
      message: 'Hello from JavaScript!'
    });
    ```
  </Tab>

  <Tab title="cURL">
    ```bash
    # Direct API calls
    curl -X POST http://localhost:8000/api/v1/messages \
      -H "Content-Type: application/json" \
      -d '{
        "instance": "my-whatsapp",
        "to": "+1234567890",
        "message": "Hello from cURL!"
      }'
    ```
  </Tab>
</Tabs>

---

## Interactive Documentation

Omni includes built-in FastAPI/Swagger documentation:

```bash
# Start Omni
make dev

# Open in browser
open http://localhost:8882/docs
```

The interactive docs let you:
- üß™ Test all endpoints directly in your browser
- üìñ See complete request/response schemas
- üîê Configure API key authentication
- üíæ Download OpenAPI spec for code generation

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Send Message" icon="paper-plane" href="/omni/api/send-message">
    Learn how to send messages with the API
  </Card>

  <Card title="Manage Instances" icon="server" href="/omni/api/manage-instances">
    Create and configure messaging instances
  </Card>

  <Card title="Track Messages" icon="chart-line" href="/omni/api/traces">
    Debug and analyze message traces
  </Card>

  <Card title="Quick Start" icon="rocket" href="/omni/quickstart">
    Get started with Omni
  </Card>
</CardGroup>
